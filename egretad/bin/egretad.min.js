var __reflect=this&&this.__reflect||function(e,t,a){e.__class__=t,a?a.push(t):a=[t],e.__types__=e.__types__?a.concat(e.__types__):a},egretad;!function(e){var t=function(){function e(e,t){if(this.adID="9133113621",window.egret&&t&&t.stage){var a=t.stage.$displayList.renderBuffer.surface;a.parentElement.style.position="absolute"}var o=document.getElementsByTagName("body")[0],n=document.getElementById("egretad_show");n||(n=document.createElement("div"),n.id="egretad_show"),o.appendChild(n),this.adDiv=n;var i=document.createElement("script");i.async=!0,i.src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";var s=document.createElement("ins");s.className="adsbygoogle";var l=document.documentElement.clientWidth;s.style="display:inline-block;width:"+l+"px;height:50px",s.dataset.adClient="ca-pub-2550259840188565",s.dataset.adSlot=this.adID;var r=document.createElement("script");r.innerHTML="(adsbygoogle = window.adsbygoogle || []).push({});",this.adDiv.appendChild(i),this.adDiv.appendChild(s),this.adDiv.appendChild(r)}return e.prototype.show=function(){},e.prototype.close=function(){},e.prototype.showAll=function(){},e}();e.AdxBanner=t,__reflect(t.prototype,"egretad.AdxBanner",["egretad.IAD"])}(egretad||(egretad={}));var egretad;!function(e){var t=function(){function t(t,a,o,n){this.startPaly=!1,this.callBackObj={},this.category=1;var i=document.getElementsByTagName("body")[0];this.adContainer=document.createElement("div"),this.adContainer.style.overflow="hidden",this.category=o,i.appendChild(this.adContainer),this.callBackObj=t,this.tag=a,e.IMAManager.init(this.setUpIMA.bind(this),n)}return t.prototype.show=function(){try{this.startPaly||(this.startPaly=!0,this.adContainer.style.display="block",this.adDisplayContainer.initialize(),console.log("aaaaaa"),this.adsManager.init(document.documentElement.clientWidth,document.documentElement.clientHeight,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.adContainer.childNodes[0].style.overflow="hidden")}catch(e){this.startPaly=!1}},t.prototype.showAll=function(){try{this.startPaly||(this.startPaly=!0,this.adContainer.style.display="block",this.adDisplayContainer.initialize(),this.adsManager.init(document.documentElement.clientWidth,document.documentElement.clientHeight,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.adContainer.childNodes[0].style.overflow="hidden")}catch(e){this.startPaly=!1}},t.prototype.close=function(){this.adContainer.childNodes[0].style.display="none"},t.prototype.setUpIMA=function(){this.adContainer.style.display="none",this.adContainer.innerHTML="",google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);var e=new google.ima.AdDisplayContainer(this.adContainer,null,null);this.adDisplayContainer=e;var t=new google.ima.AdsLoader(e);this.adsLoader=t,t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1);var a=new google.ima.AdsRequest;a.adTagUrl=this.tag;var o=document.documentElement.clientWidth,n=document.documentElement.clientHeight;a.linearAdSlotWidth=o,a.linearAdSlotHeight=n,a.nonLinearAdSlotWidth=o,a.nonLinearAdSlotHeight=n,t.requestAds(a)},t.prototype.onAdsManagerLoaded=function(t){this.adContainer.style.display="none";var a=new google.ima.AdsRenderingSettings;a.restoreCustomPlaybackStateOnAdBreakComplete=!0,a.requestNonPersonalizedAds=this.category;var o={currentTime:0,duration:0},n=t.getAdsManager(o,a);this.adsManager=n,n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),n.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),n.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this));for(var i=[google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.USER_CLOSE,google.ima.AdEvent.INTERACTION,google.ima.AdEvent.LINEAR_CHANGED],s=0,l=i.length;l>s;s++)n.addEventListener(i[s],this.onAdEvent.bind(this));this.startPaly=!1,this.onCallBack(e.AD.CREATED)},t.prototype.onAdError=function(t){this.onCallBack(e.AD.ERROR,t.getError().toString()),this.startPaly=!1},t.prototype.onAdEvent=function(t){t.getAd();switch(t.type){case"click":this.onCallBack(e.AD.CLICK);break;case"loaded":this.isLinear=t.getAd().isLinear(),this.onCallBack(e.AD.LOADED);break;case"start":this.startPaly=!0,this.onCallBack(e.AD.START);break;case"complete":break;case"allAdsCompleted":this.setUpIMA(),this.onCallBack(e.AD.END)}},t.prototype.onContentPauseRequested=function(){},t.prototype.onContentResumeRequested=function(){this.isLinear&&(this.setUpIMA(),this.onCallBack(e.AD.END))},t.prototype.onCallBack=function(e,t){void 0===t&&(t=""),this.callBackObj[e]&&this.callBackObj[e](t)},t}();e.AdxIMA=t,__reflect(t.prototype,"egretad.AdxIMA",["egretad.IAD"])}(egretad||(egretad={}));var egretad;!function(e){var t=function(){function t(e,t){this.callBackObj={created:null},this.LagLat(e,t)}return t.prototype.addEventListener=function(e,t){this.callBackObj[e]=t},t.prototype.show=function(){this.ad&&this.ad.show()},t.prototype.showAll=function(){this.ad&&this.ad.showAll()},t.prototype.close=function(){this.ad&&this.ad.close()},t.prototype.onCallBack=function(e,t){void 0===t&&(t=""),this.callBackObj[e]&&this.callBackObj[e](t)},t.prototype.upload=function(a,o,n){var i=this,s="//sspapi.egret.com/api/ad/getAd?ad_id="+a,l=new XMLHttpRequest;l.onload=function(){var a=JSON.parse(l.responseText);if("success"==a.msg)switch(a.data.ad_type){case 1:break;case 2:break;case 3:var s=a.data.ad_code.toString();i.ad=new e.AdxIMA(i.callBackObj,s,o,n)}else i.onCallBack(t.ERROR,"广告KEY不正确或者其他原因，"+a.msg)},l.open("GET",s),l.send()},t.prototype.LagLat=function(e,a){function o(o){return console.log("aaaa"),t.lat=o.coords.latitude,t.lag=o.coords.longitude,console.log(t.lat+"~~~"+t.lag),console.log("!!!!!!!!!!!!!!!!!!!"+navigator.language),i.PopOut(e,a),t.flag=!0}if(navigator.geolocation){if(console.log("trues"),navigator.language){var n=navigator.language;"zh-CN"==n?(console.log("zh_CN"),this.upload(e,0,a)):(console.log("###"),navigator.geolocation.getCurrentPosition(o))}else console.log("!@@@");console.log("eeee")}var i=this},t.prototype.PopOut=function(e,a){var o=this,n=["AT","奥地利","BE","比利时","BG","保加利亚","CY","塞浦路斯","CZ","捷克","DE","德国","DK","丹麦","EE","爱沙尼亚","ES","西班牙","FI","芬兰","FR","法国","GB","英国","GR","希腊","HR","克罗地亚","HU","匈牙利","IE","爱尔兰","IT","意大利","LT","立陶宛","LU","卢森堡","LV","拉脱维亚","MT","马耳他","NL","荷兰","PL","波兰","PT","葡萄牙","RO","罗马尼亚","SE","瑞典","SI","斯洛文尼亚","SK","斯洛伐克"];console.log(t.lat+"!!!"+t.lag),clearInterval(t.time);var i={method:"GET"},s={headers:{Accept:"application/json","Content-Type":"application/json",mode:"no-cors"}};fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t.lat+","+t.lag+"&key=AIzaSyB8OtmsZk9rNmPXVygUaodC3zwR0GZ0AW0",i).then(function(e){return e.text()}).then(function(t){var i=JSON.parse(t);console.log(i.results[0].address_components);for(var l=0,r=0;r<i.results[0].address_components.length;r++)l++;console.log(l+"qq");for(var d=i.results[0].address_components[l-2].short_name,l=(i.results[0].address_components[l-2].long_name,0);l<n.length;l++){if(n[l]==d){console.log("PPPPPP"),console.log(l+"aa"),fetch("//ssp.egret.com/api/statistical/shownumber?ad_id="+e,s).then(function(e){return e.text()}).then(function(e){console.log("@@@")})["catch"](function(e){});var c=document.createElement("div");c.id="All",c.style.zIndex="10000",document.body.appendChild(c),document.body.style.margin="0",document.body.style.height="100%";var g=window.screen.height;c.style.height=g+"px",c.style.width="100%",c.style.background="rgba(0,0,0,0.2)";var p=document.createElement("div");p.style.width="80%",p.style.height="60%",c.style.position="relative",p.style.position="absolute",p.style.left="10%",p.style.top="20%",p.style.background="#fff";var h=document.createElement("p");h.style.width="100%",h.innerHTML="Egret Privacy Policy & Regulation",h.style.textAlign="center",h.style.margin="0",h.style.position="absolute",h.style.top="5px",h.style.fontSize="14px",h.style.height="20px",h.style.lineHeight="20px";var u=document.createElement("textarea");u.style.width="96%",u.style.border="1 #000 solider",u.style.position="absolute",u.style.top="30px",u.style.height="80%",u.style.left="1%",u.innerHTML="Dear Players,\nFor your wonderful experience of our games and respect your acknowledge rights, please kindly note the following two points:\n1.All the ads that show in our game are come from Google and we will show personalized ads firstly to you according to your device type information,IP address,etc.\n2.We will get your location information according to the longitude and latitude information from Google Map.\nWe promise will not disclose these information to anyone and any third party .Just for ads show and recommendation purpose.";var y=document.createElement("input");y.style.width="25%",y.style.height="30px",y.value="I Agree",y.type="button",y.id="agree",y.style.position="absolute",y.style.bottom="10px",y.style.right="10px",y.style.fontSize="12px",y.style.lineHeight="30px",y.style.textAlign="center",y.onclick=function(){fetch("//ssp.egret.com/api/statistical/agreeNumber?ad_id="+e,s).then(function(e){return e.text()}).then(function(e){c.style.display="none"})["catch"](function(e){}),c.style.display="none",o.upload(e,0,a)};var m=document.createElement("input");return m.style.width="25%",m.style.height="30px",m.value="I Don't Agree",m.type="button",m.id="unagree",m.style.position="absolute",m.style.bottom="10px",m.style.left="10px",m.style.fontSize="12px",m.style.lineHeight="30px",m.style.textAlign="center",m.onclick=function(){fetch("//ssp.egret.com/api/statistical/agreeNumber?ad_id="+e,s).then(function(e){return e.text()}).then(function(e){c.style.display="none"})["catch"](function(e){}),c.style.display="none",o.upload(e,1,a)},p.appendChild(y),p.appendChild(m),p.appendChild(u),p.appendChild(h),c.appendChild(p),!0}55==l&&n[l]!=d&&(console.log(l+"aa"),o.upload(e,1,a))}})["catch"](function(e){alert(e)})},t.VERSION="v1.0",t.CREATED="created",t.LOADED="loaded",t.START="start",t.END="end",t.ERROR="error",t.CLICK="click",t.lag="",t.lat="",t.time=0,t.flag=!1,t}();e.AD=t,__reflect(t.prototype,"egretad.AD")}(egretad||(egretad={}));var egretad;!function(e){var t=function(){function e(){}return e.init=function(t,a){var o=this;if(e.isInit&&t(),e.callBackList.push(t),!e.startInit){if(window.egret&&a&&a.stage){var n=a.stage.$displayList.renderBuffer.surface;n.parentElement.style.position="absolute"}var i=document.getElementById("egretAdScript");if(!i){e.startInit=!0;var s=document.getElementsByTagName("body")[0],l=document.createElement("script");l.id="egretAdScript",l.type="text/javascript",l.src="//imasdk.googleapis.com/js/sdkloader/ima3.js",s.appendChild(l),l.onload=function(){e.isInit=!0,o.onCallBack()}}}},e.onCallBack=function(){for(var t=0,a=e.callBackList.length;a>t;t++)e.callBackList[t]();e.callBackList=[]},e.callBackList=[],e.startInit=!1,e.isInit=!1,e}();e.IMAManager=t,__reflect(t.prototype,"egretad.IMAManager")}(egretad||(egretad={}));